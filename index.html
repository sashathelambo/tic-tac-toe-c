<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Terminal Portfolio - Tic-Tac-Toe</title>
    <style>
        body {
            font-family: "Lucida Console", Monaco, monospace;
            background-color: #000;
            color: #0f0;
            padding: 20px;
        }
        
        .cmd {
            white-space: pre-wrap;
            font-size: 16px;
            line-height: 1.4;
            background-color: #000;
            border: 2px solid #0f0;
            padding: 10px;
            width: 600px;
            height: 400px;
            overflow-y: auto;
            margin-bottom: 20px;
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.5);
            border-radius: 5px;
        }
        
        .cmd::before {
            content: "$ ";
            color: #0f0;
        }
        
        .board {
            margin-top: 20px;
        }
        
        .board div {
            display: flex;
        }
        
        .board div span {
            width: 30px;
            height: 30px;
            display: inline-block;
            text-align: center;
            line-height: 30px;
            border: 1px solid #0f0;
            margin-right: 5px;
            cursor: pointer;
        }
        
        .board div span:last-child {
            margin-right: 0;
        }
        
        .terminal-button {
            background-color: #000;
            color: #0f0;
            border: 2px solid #0f0;
            padding: 5px 10px;
            font-family: "Lucida Console", Monaco, monospace;
            cursor: pointer;
            margin-right: 10px;
            border-radius: 5px;
        }
        
        .terminal-button:hover {
            background-color: #0f0;
            color: #000;
        }
    </style>
</head>

<body>
    <div class="cmd">
        <div id="output"></div>
        <input type="text" id="input" autofocus style="background-color: #000; color: #0f0; border: none; outline: none; width: 100%; margin-bottom: 10px;">
        <div class="board" id="board" style="margin-top: 10px;">
            <div style="display: flex; justify-content: center; gap: 1px; z-index: 1;">
                <span data-index="0" style="margin-right: 1px; z-index: 1;">1</span>
                <span data-index="1" style="margin-right: 1px; z-index: 1;">2</span>
                <span data-index="2" style="z-index: 1;">3</span>
            </div>
            <div style="display: flex; justify-content: center; gap: 1px; z-index: 1;">
                <span data-index="3" style="margin-right: 1px; z-index: 1;">4</span>
                <span data-index="4" style="margin-right: 1px; z-index: 1;">5</span>
                <span data-index="5" style="z-index: 2;">6</span>
            </div>
            <div style="display: flex; justify-content: center; gap: 1px; z-index: 1;">
                <span data-index="6" style="margin-right: 1px; z-index: 1;">7</span>
                <span data-index="7" style="margin-right: 1px; z-index: 1;">8</span>
                <span data-index="8" style="z-index: 1;">9</span>
            </div>
        </div>

        <script>
            const board = Array(9).fill(null);
            let currentPlayer = 'X';
            const output = document.getElementById('output');
            const input = document.getElementById('input');
            const boardDiv = document.getElementById('board');
            let timer;
            const timeLimit = 10; // 10 seconds time limit for each move

            function displayBoard() {
                board.forEach((cell, index) => {
                    const cellElement = document.querySelector(`span[data-index='${index}']`);
                    cellElement.textContent = cell || index + 1;
                });
            }

            function checkWin(marker) {
                const winPatterns = [
                    [0, 1, 2],
                    [3, 4, 5],
                    [6, 7, 8], // rows
                    [0, 3, 6],
                    [1, 4, 7],
                    [2, 5, 8], // columns
                    [0, 4, 8],
                    [2, 4, 6] // diagonals
                ];
                return winPatterns.some(pattern =>
                    pattern.every(index => board[index] === marker)
                );
            }

            function isDraw() {
                return board.every(cell => cell === 'X' || cell === 'O');
            }

            function handleClick(event) {
                const index = event.target.getAttribute('data-index');
                if (board[index] || checkWin('X') || checkWin('O')) return;

                board[index] = currentPlayer;
                displayBoard();

                if (checkWin(currentPlayer)) {
                    output.textContent = `Player ${currentPlayer} wins!`;
                    clearTimeout(timer);
                } else if (isDraw()) {
                    output.textContent = "It's a draw!";
                    clearTimeout(timer);
                } else {
                    currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
                    output.textContent = `Player ${currentPlayer}'s turn`;
                    startTimer();
                }
            }

            function resetGame() {
                board.fill(null);
                currentPlayer = 'X';
                displayBoard();
                output.textContent = `Welcome to Tic-Tac-Toe! Player ${currentPlayer}'s turn`;
                startTimer();
            }

            function undoMove() {
                const lastMoveIndex = board.lastIndexOf(currentPlayer);
                if (lastMoveIndex !== -1) {
                    board[lastMoveIndex] = null;
                    currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
                    displayBoard();
                    output.textContent = `Player ${currentPlayer}'s turn`;
                    startTimer();
                }
            }

            function changeTheme() {
                const body = document.body;
                if (body.style.backgroundColor === 'black') {
                    body.style.backgroundColor = 'white';
                    body.style.color = 'black';
                } else {
                    body.style.backgroundColor = 'black';
                    body.style.color = 'green';
                }
            }

            function startTimer() {
                clearTimeout(timer);
                timer = setTimeout(() => {
                    currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
                    output.textContent = `Time's up! Player ${currentPlayer}'s turn`;
                    startTimer();
                }, timeLimit * 1000);
            }

            boardDiv.addEventListener('click', handleClick);
            displayBoard();
            output.textContent = `Welcome to Tic-Tac-Toe! Player ${currentPlayer}'s turn`;
            startTimer();

            // Adding buttons for new features
            const buttonContainer = document.createElement('div');
            buttonContainer.style.marginTop = '20px';

            const resetButton = document.createElement('button');
            resetButton.textContent = 'Reset Game';
            resetButton.className = 'terminal-button';
            resetButton.addEventListener('click', resetGame);
            buttonContainer.appendChild(resetButton);

            const undoButton = document.createElement('button');
            undoButton.textContent = 'Undo Move';
            undoButton.className = 'terminal-button';
            undoButton.addEventListener('click', undoMove);
            buttonContainer.appendChild(undoButton);

            const themeButton = document.createElement('button');
            themeButton.textContent = 'Change Theme';
            themeButton.className = 'terminal-button';
            themeButton.addEventListener('click', changeTheme);
            buttonContainer.appendChild(themeButton);

            document.body.appendChild(buttonContainer);
        </script>
    </div>
</body>

</html>